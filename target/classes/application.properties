# ==========================
# DATABASE CONFIG (Render)
# ==========================
spring.datasource.url=jdbc:postgresql://${DB_HOST}:${DB_PORT}/${DB_NAME}
spring.datasource.username=${DB_USER}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true

# ==========================
# SERVER CONFIG (Render)
# ==========================
# Server port (use Render-assigned port dynamically)
server.port=${PORT:8080}
server.shutdown=graceful  # Enables graceful shutdown to avoid Tomcat warnings

# ==========================
# OPTIONAL SSO PROPERTIES
# ==========================
sso.client-id=${SSO_CLIENT_ID}
sso.client-secret=${SSO_CLIENT_SECRET}
sso.idp.authorize=https://patidar.xecurify.com/moas/idp/jwtsso/379431

# ==========================
# SAML SSO Configuration
# ==========================
spring.security.saml2.relyingparty.registration.sso-saml-demo.identityprovider.metadata-uri=https://patidar.xecurify.com/moas/metadata/saml/379431/432750
spring.security.saml2.relyingparty.registration.sso-saml-demo.assertion-consumer-service-location=https://miniorange-javasso.onrender.com/saml2/authenticate/sso-saml-demo
spring.security.saml2.relyingparty.registration.sso-saml-demo.entity-id=https://miniorange-javasso.onrender.com/saml2/service-provider-metadata/sso-saml-demo

# ==========================
# OIDC (MiniOrange)
# ==========================
spring.security.oauth2.client.registration.miniorange.client-id=${OIDC_CLIENT_ID}
spring.security.oauth2.client.registration.miniorange.client-secret=${OIDC_CLIENT_SECRET}
spring.security.oauth2.client.registration.miniorange.scope=openid,profile,email
spring.security.oauth2.client.registration.miniorange.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.miniorange.redirect-uri=https://miniorange-javasso.onrender.com/login/oauth2/code/miniorange
spring.security.oauth2.client.registration.miniorange.client-name=MiniOrange OIDC

spring.security.oauth2.client.provider.miniorange.authorization-uri=https://patidar.xecurify.com/moas/idp/openidsso
spring.security.oauth2.client.provider.miniorange.token-uri=https://patidar.xecurify.com/moas/rest/oauth/token
spring.security.oauth2.client.provider.miniorange.user-info-uri=https://patidar.xecurify.com/moas/rest/oauth/getuserinfo
spring.security.oauth2.client.provider.miniorange.jwk-set-uri=https://patidar.xecurify.com/moas/rest/jwks
spring.security.oauth2.client.provider.miniorange.user-name-attribute=email

# ==========================
# Optional (for debugging)
# ==========================
sso.miniorange.introspection-uri=https://patidar.xecurify.com/moas/rest/oauth/introspect
sso.miniorange.revoke-uri=https://patidar.xecurify.com/moas/rest/oauth/revoke
sso.miniorange.metadata-uri=https://patidar.xecurify.com/moas/discovery/v2.0/ACEFsCqqXJikVNUwzyl3tAAwDSbjOD5C/.well-known/openid-configuration
